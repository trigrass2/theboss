/dts-v1/;

#define STM32F429_439xx

#include "stm32f4xx.dtsi"
#include "stm32f4xx.h"
#include "stm32f4xx_gpio.h"

/ {

	leds: leds {
		compatible = "st,stm32_leds";
		pins = <&led_pins>;
	};

	serial {
		debug_uart: debug {
			compatible = "st,stm32_uart";
			baud = <115200>;
			reg = <USART1>;
			interrupt = <USART1_IRQn>;
		};

		ext_uart: ext {
			compatible = "st,stm32_uart";
			baud = <100000>;
			reg = <UART4>;
			interrupt = <UART4_IRQn>;
		};

		bps_uart: bps {
			compatible = "st,stm32_uart";
			baud = <57600>;
			reg = <USART3>;
			interrupt = <USART3_IRQn>;
		};
	};

	usb_serial {
		compatible = "st,usb-serial";
	};

	gpio {
		compatible = "st,stm32_gpio";
		debug_serial_pins {
			pinctrl = <
				GPIOB GPIO_Pin_6 (GPIO_AF_USART1 | GPIO_OType_PP | GPIO_PuPd_UP | GPIO_Speed_50MHz) /* TX */
				GPIOB GPIO_Pin_7 (GPIO_AF_USART1 | GPIO_OType_PP | GPIO_PuPd_UP | GPIO_Speed_50MHz) /* RX */
			>;
		};

		ext_serial_pins {
			pinctrl = <
				GPIOC GPIO_Pin_10 (GPIO_AF_UART4 | GPIO_PuPd_UP) /* TX */
				GPIOC GPIO_Pin_11 (GPIO_AF_UART4 | GPIO_PuPd_UP) /* RX */
			>;
		};
/*
		usb_pins {
			pinctrl = <
				GPIOA GPIO_Pin_11 (GPIO_AF_OTG_FS | GPIO_OType_PP | GPIO_Speed_50MHz)
				GPIOA GPIO_Pin_12 (GPIO_AF_OTG_FS | GPIO_OType_PP | GPIO_Speed_50MHz)
			>;
		};
*/
		led_pins: led_pins {
			pinctrl = <
				GPIOG GPIO_Pin_13 GPIO_Mode_OUT
				GPIOG GPIO_Pin_14 GPIO_Mode_OUT
			>;
		};
	};
};
